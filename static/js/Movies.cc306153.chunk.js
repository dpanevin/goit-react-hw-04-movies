(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{53:function(e,t,r){"use strict";var n=r(51),c=r.n(n),a=r(52),s=r(55),u=r(56),o="https://api.themoviedb.org/3",i="925491183043d455ae6efbd6833f46c6",p=new(function(){function e(){Object(s.a)(this,e),this.searchQuery="",this.page=1,this.totalResults=null,this.currentRequest=null}return Object(u.a)(e,[{key:"fetchTrendingMovies",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentRequest="trending",t="".concat(o,"/trending/movie/week?api_key=").concat(i,"&page=").concat(this.page,"&language=ru"),e.prev=2,e.next=5,fetch(t);case 5:return r=e.sent,e.next=8,r.json();case 8:return n=e.sent,this.totalResults=n.total_results,this.currentRequest="trending",e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGenres",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/genre/movie/list?api_key=").concat(i,"&language=ru"),e.prev=1,e.next=4,fetch(t);case 4:return r=e.sent,n=r.json(),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMoviesByQuery",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentRequest="search",this.searchQuery=t,r="".concat(o,"/search/movie?api_key=").concat(i,"&language=ru&page=").concat(this.page,"&include_adult=false&query=").concat(this.searchQuery),e.prev=3,e.next=6,fetch(r);case 6:return n=e.sent,e.next=9,n.json();case 9:return a=e.sent,this.totalResults=a.total_results,this.currentRequest="search",e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieById",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(o,"/movie/").concat(t,"?api_key=").concat(i,"&language=ru&external_source=imdb_id"),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,a=n.json(),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieCast",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(o,"/movie/").concat(t,"/credits?api_key=").concat(i,"&language=ru"),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,s=a.cast,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieReviews",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var r,n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(o,"/movie/").concat(t,"/reviews?api_key=").concat(i,"&language=en"),e.prev=1,e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,s=a.results,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}());t.a=p},60:function(e,t,r){e.exports={SearchForm:"Movies_SearchForm__2iyXf",SearchFormButton:"Movies_SearchFormButton__1al34",SearchFormButtonLabel:"Movies_SearchFormButtonLabel__3wCnp",SearchFormInput:"Movies_SearchFormInput__3IRDd",movieLink:"Movies_movieLink__1OhCf"}},68:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return g}));var n=r(51),c=r.n(n),a=r(52),s=r(17);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=r(54),p=r(0),h=r(18),l=r(3),f=r(9),v=r(57),b=r(53),m=r(60),y=r.n(m),j=r(1);function g(){var e=Object(l.h)(),t=Object(l.g)(),r=Object(p.useState)(""),n=Object(i.a)(r,2),s=n[0],u=n[1],m=Object(p.useState)(null),g=Object(i.a)(m,2),O=g[0],d=g[1],w=new URLSearchParams(e.search).get("query");function k(e){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.fetchMoviesByQuery(t);case 2:r=e.sent,d(r.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.useEffect)((function(){!O&&w&&k(w)}),[O,w]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:y.a.SearchForm,onSubmit:function(r){r.preventDefault(),""!==s.trim()?(t.push(o(o({},e),{},{search:"query=".concat(s)})),k(s),u("")):h.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.")},children:[Object(j.jsx)("button",{type:"submit",className:y.a.SearchFormButton,children:Object(j.jsx)("span",{className:y.a.SearchFormButtonLabel,children:"Search"})}),Object(j.jsx)("input",{className:y.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0438 \u0444\u043e\u0442\u043e",onChange:function(e){u(e.target.value)},value:s})]}),O&&Object(j.jsx)("ul",{children:O.map((function(t){return Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{className:y.a.movieLink,to:{pathname:"/movies/".concat(t.id),state:{from:e}},children:t.title})},t.id)}))})]})}}}]);
//# sourceMappingURL=Movies.cc306153.chunk.js.map