(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{53:function(e,t,n){"use strict";var c=n(51),r=n.n(c),a=n(52),s=n(55),i=n(56),o="https://api.themoviedb.org/3",u="925491183043d455ae6efbd6833f46c6",l=new(function(){function e(){Object(s.a)(this,e),this.searchQuery="",this.page=1,this.totalResults=null,this.currentRequest=null}return Object(i.a)(e,[{key:"fetchTrendingMovies",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentRequest="trending",t="".concat(o,"/trending/movie/week?api_key=").concat(u,"&page=").concat(this.page,"&language=ru"),e.prev=2,e.next=5,fetch(t);case 5:return n=e.sent,e.next=8,n.json();case 8:return c=e.sent,this.totalResults=c.total_results,this.currentRequest="trending",e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGenres",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(o,"/genre/movie/list?api_key=").concat(u,"&language=ru"),e.prev=1,e.next=4,fetch(t);case 4:return n=e.sent,c=n.json(),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMoviesByQuery",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentRequest="search",this.searchQuery=t,n="".concat(o,"/search/movie?api_key=").concat(u,"&language=ru&page=").concat(this.page,"&include_adult=false&query=").concat(this.searchQuery),e.prev=3,e.next=6,fetch(n);case 6:return c=e.sent,e.next=9,c.json();case 9:return a=e.sent,this.totalResults=a.total_results,this.currentRequest="search",e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieById",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(o,"/movie/").concat(t,"?api_key=").concat(u,"&language=ru&external_source=imdb_id"),e.prev=1,e.next=4,fetch(n);case 4:return c=e.sent,a=c.json(),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieCast",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(o,"/movie/").concat(t,"/credits?api_key=").concat(u,"&language=ru"),e.prev=1,e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,s=a.cast,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMovieReviews",value:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(o,"/movie/").concat(t,"/reviews?api_key=").concat(u,"&language=en"),e.prev=1,e.next=4,fetch(n);case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,s=a.results,e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"incrementPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}());t.a=l},61:function(e,t,n){e.exports={MovieDetails:"MovieDetails_MovieDetails__3RsBP",moviePosterImg:"MovieDetails_moviePosterImg__oh9y5",movieInfo:"MovieDetails_movieInfo__2mHxA",addInfoLink:"MovieDetails_addInfoLink__3WSGg",activeInfoLink:"MovieDetails_activeInfoLink__38Gw8",goBackBtn:"MovieDetails_goBackBtn__1uZDU"}},67:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var c=n(51),r=n.n(c),a=n(52),s=n(54),i=n(0),o=n(3),u=n(9),l=n(57),h=n(15),v=n.n(h),p=n(53),f=n(61),j=n.n(f),d=n(1),b=Object(i.lazy)((function(){return n.e(1).then(n.bind(null,62))})),g=Object(i.lazy)((function(){return n.e(5).then(n.bind(null,64))}));function m(){var e=Object(o.g)(),t=Object(o.h)(),n=Object(o.i)().movieId,c=Object(o.j)().url,h=Object(i.useState)(null),f=Object(s.a)(h,2),m=f[0],x=f[1];return Object(l.useEffect)((function(){function e(){return(e=Object(a.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.fetchMovieById(n);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}m||function(){e.apply(this,arguments)}()}),[m,n]),Object(d.jsx)(d.Fragment,{children:m&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:j.a.goBackBtn,type:"button",onClick:function(){var n,c;e.push(null!==(n=null===t||void 0===t||null===(c=t.state)||void 0===c?void 0:c.from)&&void 0!==n?n:"/")},children:"\u041d\u0430\u0437\u0430\u0434"}),Object(d.jsxs)("div",{className:j.a.MovieDetails,children:[Object(d.jsx)("img",{className:j.a.moviePosterImg,src:"https://image.tmdb.org/t/p/w500/".concat(m.poster_path),alt:m.title}),Object(d.jsxs)("div",{className:j.a.movieInfo,children:[Object(d.jsx)("h2",{children:m.title}),Object(d.jsxs)("p",{children:["\u041e\u0446\u0435\u043d\u043a\u0430: ",m.vote_average," (",m.vote_count,")"]}),Object(d.jsx)("h3",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(d.jsx)("p",{children:m.overview}),Object(d.jsx)("h3",{children:"\u0416\u0430\u043d\u0440\u044b"}),m.genres.map((function(e){return e.name})).join(", ")]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e:"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.c,{to:"".concat(c,"/cast"),className:j.a.addInfoLink,activeClassName:j.a.activeInfoLink,children:"\u0410\u043a\u0442\u0435\u0440\u044b"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.c,{to:"".concat(c,"/reviews"),className:j.a.addInfoLink,activeClassName:j.a.activeInfoLink,children:"\u0420\u0435\u0432\u0438\u0437\u0438\u0438 (English)"})})]}),Object(d.jsx)(i.Suspense,{fallback:Object(d.jsx)(v.a,{className:"Loader",type:"Oval",color:"rgb(0, 224, 217)",height:100,width:100}),children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"".concat(c,"/cast"),children:Object(d.jsx)(b,{movieId:n})}),Object(d.jsx)(o.b,{path:"".concat(c,"/reviews"),children:Object(d.jsx)(g,{movieId:n})})]})})]})]})})}}}]);
//# sourceMappingURL=MovieDetails.c1063145.chunk.js.map