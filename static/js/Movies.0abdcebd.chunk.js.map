{"version":3,"sources":["components/Movies/Movies.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/Movies/Movies.jsx"],"names":["module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","Movies","location","useLocation","history","useHistory","useState","query","setQuery","movies","setMovies","request","URLSearchParams","search","get","onSubmit","a","moviesApi","fetchMoviesByQuery","response","results","useEffect","className","styles","SearchForm","e","preventDefault","trim","toast","error","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","value","map","movie","movieLink","to","pathname","id","state","from","title"],"mappings":"4HACAA,EAAOC,QAAU,CAAC,WAAa,2BAA2B,iBAAmB,iCAAiC,sBAAwB,sCAAsC,gBAAkB,gCAAgC,UAAY,4B,oHCC1O,SAASC,EAAQC,EAAQC,GACvB,IAAIC,EAAOC,OAAOD,KAAKF,GAEvB,GAAIG,OAAOC,sBAAuB,CAChC,IAAIC,EAAUF,OAAOC,sBAAsBJ,GACvCC,IAAgBI,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAEtDP,EAAKQ,KAAKC,MAAMT,EAAMG,GAGxB,OAAOH,EAGM,SAASU,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAC9C,OAAAC,EAAA,GAAeP,EAAQM,EAAKF,EAAOE,OAE5BhB,OAAOkB,0BAChBlB,OAAOmB,iBAAiBT,EAAQV,OAAOkB,0BAA0BJ,IAEjElB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GACxChB,OAAOiB,eAAeP,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAKjF,OAAON,E,yEC3BM,SAASU,IACtB,IAAMC,EAAWC,cACXC,EAAUC,cAChB,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA4BF,mBAAS,MAArC,mBAAOG,EAAP,KAAeC,EAAf,KACMC,EAAU,IAAIC,gBAAgBV,EAASW,QAAQC,IAAI,SAL1B,SAmChBC,EAnCgB,8EAmC/B,WAAwBR,GAAxB,eAAAS,EAAA,sEACyBC,IAAUC,mBAAmBX,GADtD,OACQY,EADR,OAGET,EAAUS,EAASC,SAHrB,4CAnC+B,sBAyC/B,OAlCAC,qBAAU,YACJZ,GAAWE,GAIfI,EAASJ,KACR,CAACF,EAAQE,IA6BV,qCACE,uBAAMW,UAAWC,IAAOC,WAAYT,SAxBxC,SAAsBU,GACpBA,EAAEC,iBAEmB,KAAjBnB,EAAMoB,QAIVvB,EAAQhB,KAAR,OACKc,GADL,IAEEW,OAAO,SAAD,OAAWN,MAGnBQ,EAASR,GACTC,EAAS,KATPoB,IAAMC,MAAM,4IAoBZ,UACE,wBAAQC,KAAK,SAASR,UAAWC,IAAOQ,iBAAxC,SACE,sBAAMT,UAAWC,IAAOS,sBAAxB,sBAGF,uBACEV,UAAWC,IAAOU,gBAClBH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,oIACZC,SAvCR,SAAkBZ,GAChBjB,EAASiB,EAAElC,OAAO+C,QAuCZA,MAAO/B,OAIVE,GACC,6BACGA,EAAO8B,KAAI,SAAAC,GACV,OACE,6BACE,cAAC,IAAD,CACElB,UAAWC,IAAOkB,UAClBC,GAAI,CACFC,SAAS,WAAD,OAAaH,EAAMI,IAC3BC,MAAO,CAAEC,KAAM5C,IAJnB,SAOGsC,EAAMO,SARFP,EAAMI","file":"static/js/Movies.0abdcebd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"Movies_SearchForm__2iyXf\",\"SearchFormButton\":\"Movies_SearchFormButton__1al34\",\"SearchFormButtonLabel\":\"Movies_SearchFormButtonLabel__3wCnp\",\"SearchFormInput\":\"Movies_SearchFormInput__3IRDd\",\"movieLink\":\"Movies_movieLink__1OhCf\"};","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useState, useEffect } from 'react';\nimport toast from 'react-hot-toast';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport moviesApi from 'utils/MoviesApi';\nimport styles from './Movies.module.css';\n\nexport default function Movies() {\n  const location = useLocation();\n  const history = useHistory();\n  const [query, setQuery] = useState('');\n  const [movies, setMovies] = useState(null);\n  const request = new URLSearchParams(location.search).get('query');\n\n  useEffect(() => {\n    if (movies || !request) {\n      return;\n    }\n\n    onSubmit(request);\n  }, [movies, request]);\n\n  function onChange(e) {\n    setQuery(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (query.trim() === '') {\n      toast.error('Введите поисковый запрос.');\n      return;\n    }\n    history.push({\n      ...location,\n      search: `query=${query}`,\n    });\n\n    onSubmit(query);\n    setQuery('');\n  }\n\n  async function onSubmit(query) {\n    const response = await moviesApi.fetchMoviesByQuery(query);\n\n    setMovies(response.results);\n  }\n\n  return (\n    <>\n      <form className={styles.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={styles.SearchFormButton}>\n          <span className={styles.SearchFormButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={styles.SearchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Поиск изображений и фото\"\n          onChange={onChange}\n          value={query}\n        />\n      </form>\n\n      {movies && (\n        <ul>\n          {movies.map(movie => {\n            return (\n              <li key={movie.id}>\n                <Link\n                  className={styles.movieLink}\n                  to={{\n                    pathname: `/movies/${movie.id}`,\n                    state: { from: location },\n                  }}\n                >\n                  {movie.title}\n                </Link>\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </>\n  );\n}\n"],"sourceRoot":""}